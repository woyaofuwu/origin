SELECT COUNT(1) recordcount
  FROM TF_B_TRADE_BATDEAL
 WHERE  SERIAL_NUMBER = :USER_ID
    AND BATCH_OPER_TYPE = 'VPNUSERSCARECHANGE'
    AND DEAL_STATE NOT IN ('3','6','9')
    AND  ROWNUM<2