<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head jwcid="@Head">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>产品变更</title>
<script jwcid="@Script" src="scripts/csserv/common/date/dateutils.js"></script>
<script jwcid="@Script" src="person/wirelessphone/changeproduct/scripts/changeproduct.js"></script>
<script jwcid="@Script" src="person/wirelessphone/changeproduct/scripts/changeproductextend.js"></script>
<script jwcid="@Script" src="scripts/csserv/component/offer/offerdefine.js"></script>
</head>
<body jwcid="@Body"><div class="m_wrapper"><div class="m_wrapper2">
	<!-- 区域 开始 -->
	<div class="c_box">
		<!-- 认证 开始 -->
		<div jwcid="AuthPart@csserv:Auth" element="div" authType="12" tradeTypeCode="9733" beforeAction="changeProduct.beforeSubmitSerialNumber(data)" tradeAction="changeProduct.afterSubmitSerialNumber(data)"></div>
		<!-- 认证 结束 -->
	</div>

	<!-- 区域 开始 -->
	<div class="c_box">
		<!-- 标题 开始 -->
		<div class="c_title">
			<div class="text">产品</div>
			<div class="fn">
				<a href="#nogo" class="e_button"
					onclick="changeProduct.displaySwitch(this,'UCAViewPart')"><i
					class="e_ico-unfold"></i><span>显示客户信息</span>
				</a>
				
				<span class="e_input e_input-left">
					<span>
						<input jwcid="productSearch@Search"
							name="productSearch"
							page="changeproduct.ChangeProduct"
							defaultText='产品搜索'
							dynamic="true"
							listener="search"
							searchCode="SEARCH_NAME"
							valueCode="SEARCH_ID"
							optionEnterAction="changeProduct.searchProductOptionEnter"
							optionClickAction="changeProduct.searchProductOptionEnter"
							width="200"/>
					</span>
				</span>
				<span class="e_label e_label-right"><span>产品搜索</span></span>
				<button class="l_ml" jwcid="@Button" name="productSelectBtn" id="productSelectBtn" onclick="javascript:ProductSelect.popupProductSelect('0000',$('#USER_EPARCHY_CODE').val(),$('#USER_PRODUCT_ID').val())">
					<i class="e_ico-menu"></i><span>产品目录</span>
				</button>

			</div>
		</div>
		<!-- 标题 结束 -->
		<!-- 参数列表 开始 -->
		<div class="c_form c_form-col-4 c_form-text">
			<ul class="ul">
				<li class="li">
					<span class="label">当前品牌：</span>
					<span class="text" id="USER_BRAND_NAME"></span>
				</li>
				<li class="li">
					<span class="label">当前产品：</span>
					<span class="text" id="USER_PRODUCT_NAME"></span>
				</li>
				<li class="li">
					<span class="label">下次生效品牌：</span>
					<span class="text" id="NEXT_BRAND_NAME"></span>
				</li>
				<li class="li">
					<span class="label">下次生效产品：</span>
					<span class="text" id="NEXT_PRODUCT_NAME"></span>
				</li>
			</ul>
		</div>
		<div class="c_form c_form-col-4 c_form-text" jwcid="UCAViewPart@Part" style="display:none">
			<ul class="ul">
				<li class="li">
					<span class="label">客户名称：</span>
					<span class="text" jwcid="@Insert" name="CUST_NAME" id="CUST_NAME" value="ognl:custInfoView.CUST_NAME"
							desc="客户名称"/>
				</li>
				<li class="li">
					<span class="label">客户性别：</span>
					<span class="text" jwcid="@Insert" name="SEX" id="SEX"  
							value="ognl:@com.ailk.biz.util.StaticUtil@getStaticValue('SEX',custInfoView.SEX)" desc="客户性别"/>
				</li>
				<li class="li">
					<span class="label">证件类型：</span>
					<span class="text" jwcid="@Insert" name="PSPT_TYPE_CODE" id="PSPT_TYPE_CODE"
					        value="ognl:@com.ailk.biz.util.StaticUtil@getStaticValue('TD_S_PASSPORTTYPE',custInfoView.PSPT_TYPE_CODE)"
							desc="证件类型" />
				</li>
				<li class="li">
					<span class="label">证件号码：</span>
					<span class="text" jwcid="@Insert" name="PSPT_ID" id="PSPT_ID" value="ognl:custInfoView.PSPT_ID" 
							desc="证件号码"/>
				</li>
				<li class="li">
					<span class="label">证件有效期：</span>
					<span class="text" jwcid="@Insert" name="PSPT_END_DATE" id ="PSPT_END_DATE" 
							value="ognl:custInfoView.PSPT_END_DATE==null ? '' : getPage().formatDate('yyyy-MM-dd', custInfoView.PSPT_END_DATE)" 
							desc="证件有效期"/>
				</li>
			</ul>
		</div>
		<!-- 参数列表 结束 -->
	</div>
    <div class="l_col">
		<!-- 第 1 栏 开始 -->
		<div class="l_left" style="width:49%;">
			<!-- 区域 开始 -->
			<div class="c_box">
				<!-- 标题 开始 -->
                <div class="c_title">
					<div class="text">待选区</div>
					<div class="fn">
						<span class="e_input e_input-left">
							<span>
								<input jwcid="elementSearch@Search"
									name="elementSearch"
									page="changeproduct.ChangeProduct"
									defaultText='元素搜索'
									dynamic="true"
									listener="search"
									searchCode="SEARCH_NAME"
									valueCode="SEARCH_ID"
									optionEnterAction="changeProduct.searchElementOptionEnter"
									optionClickAction="changeProduct.searchElementOptionEnter"
									width="200"/>
							</span>
						</span>
						<span class="e_label e_label-right"><span>元素搜索</span></span>
					</div>
				</div>
				<!-- 标题 结束 -->
				<!-- 分栏 开始 -->
				<div class="l_col l_col-close">
					<div class="l_col l_col-close">
					<div jwcid="offerList@csserv:OfferList" 
                           element="div" 
                           categoryId="100000000114,100000000008"></div>
				</div>
				</div>
				<!-- 分栏 结束 -->
			</div>
			<!-- 区域 结束 -->
		</div>
	    <div class="l_auto">
			<!-- 区域 开始 -->
			<div class="c_box">
				<!-- 标题 开始 -->
				<div class="c_title">
					<div class="text">已选区</div>
					<div class="fn">
						<label style="display:none">
							<input type="checkbox" class="e_checkbox" id="EFFECT_NOW" name="EFFECT_NOW"
								onclick="if(this.checked){selectedElements.effectNow();}else {selectedElements.unEffectNow();}"
								disabled="true"
								value="1"
								/>立即生效
						</label>
						<li id="BOOKING_DATE_FIELD" class="li">
						<span class="label">预约时间：</span>
							<span class="e_input" style="width:91px"><span>
							<input type="text" jwcid="@DateField" id="BOOKING_DATE" name="BOOKING_DATE" format="yyyy-MM-dd"
								disabled= "true" value="ognl:pageutil.getSysDate()" desc="预约时间" min="ognl:pageutil.getSysDate()"
								afterAction="changeProductExtend.afterBookingDate();selectedElements.effectBookingDate();"/>
							</span></span>
						</li>
					</div>
				</div>
                <div jwcid="selectedElements@csserv:SelectedElements" 
                    renderCallSvc="CS.SelectedElementSVC.getUserElements" 
                    callAddElementSvc="CS.SelectedElementSVC.dealSelectedElementsForChg" 
                    afterRenderAction="changeProduct.afterRenderSelectedElements(data);"
                    basicStartDateControlId="NEW_PRODUCT_START_DATE"
                    basicCancelDateControlId="OLD_PRODUCT_END_DATE"
                    eparchyCodeComponentId="USER_EPARCHY_CODE"
                    tradeTypeCode="9733"
                    element="div"></div>
				<!-- 表格 结束 -->
			</div>
			<!-- 区域 结束 -->
		</div>
	<!-- 第 2 栏 结束 -->
	</div>
	<div class="c_box">
		<div class="c_form c_form-label-7 c_form-col-6">
			<ul class="ul">
				<!-- li class="li" id="INVOICE_CODE_DIV" style="display:none">
					<span class="label"><span class="e_required">发票号码：</span></span>
					<span class="e_input"><span>
						<input jwcid="@TextField" name="INVOICE_CODE" id="INVOICE_CODE" type="text"
							   value="" nullable="yes" desc="发票号码" onblur=""/>
		            </span></span>
				</li-->
				<li class="li" id="OLD_VPMN_DIV" style="display:none">
					<span class="label">原VPMN优惠：</span>
					<span class="e_input"><span>
						<input jwcid="@TextField" name="OLD_VPMN_DISCNT_NAME"  id="OLD_VPMN_DISCNT_NAME" type="text"
							   value="" readonly="true" desc="原VPMN优惠"/>
		            </span></span>
				</li>
				<li class="li" id="NEW_VPMN_DIV" style="display:none">
					<span class="label"><span class="e_required">新VPMN优惠：</span></span>
					<span class="e_select" jwcid="newVpmnPart@Part"><span><span>
						<select jwcid="@Select" name="NEW_VPMN_DISCNT" id="NEW_VPMN_DISCNT"
							    source="ognl:vpmnDiscnt" value="ognl:info.ELEMENT_ID" valueField="ELEMENT_ID"
								textField="ELEMENT_NAME" titleField="ELEMENT_NAME" nullable="yes" desc="新VPMN优惠" onchange="">
						</select>
		            </span></span></span>
				</li>
				<li class="li">
					<span class="label">备注：</span>
					<span class="e_input"><span>
						<input jwcid="@TextField" name="REMARK"	id="REMARK" type="text" value="" nullable="yes" desc="备注"/>
		            </span></span>
				</li>
			</ul>
		</div>
		
		<div jwcid="SubmitPart@csserv:CSSubmit" 
	        beforeAction="changeProduct.submit()" 
	        params="" isReset="true" 
	        listener="submitChangeProduct" 
	        refreshPart="" 
	        isRender="true"
	        area="" element="div"/>
	</div>
	<!-- 分栏 结束 -->
    <div jwcid="elementAttr@csserv:ElementAttr" element="div"></div>
</div></div>
<input jwcid="@Hidden" name="SERIAL_NUMBER" id="SERIAL_NUMBER" value=""/>
<input jwcid="@Hidden" name="NEW_PRODUCT_ID" id="NEW_PRODUCT_ID" value=""/>
<input jwcid="@Hidden" name="USER_PRODUCT_ID" id="USER_PRODUCT_ID" value=""/>
<input jwcid="@Hidden" name="NEXT_PRODUCT_ID" id="NEXT_PRODUCT_ID" value=""/>
<input jwcid="@Hidden" name="NEW_PRODUCT_START_DATE" id="NEW_PRODUCT_START_DATE" value=""/>
<input jwcid="@Hidden" name="OLD_PRODUCT_END_DATE" id="OLD_PRODUCT_END_DATE" value=""/>
<input jwcid="@Hidden" name="USER_EPARCHY_CODE" id="USER_EPARCHY_CODE" value=""/>
<input jwcid="@Hidden" name="USER_ID" id="USER_ID" value=""/>
<input jwcid="@Hidden" name="STAFF_ID" id="STAFF_ID" value="ognl:getVisit().getStaffId()"/>
<input jwcid="@Hidden" name="OLD_VPMN_DISCNT_TAG" id="OLD_VPMN_DISCNT_TAG" value=""/>
<input jwcid="@Hidden" name="OLD_VPMN_DISCNT" id="OLD_VPMN_DISCNT" value=""/>
<input jwcid="@Hidden" name="VPMN_USER_ID_A" id="VPMN_USER_ID_A" value=""/>
<input jwcid="@Hidden" name="VPMN_PRODUCT_ID" id="VPMN_PRODUCT_ID" value=""/>
<input jwcid="@Hidden" name="VIP_CLASS_ID" id="VIP_CLASS_ID" value=""/>
<input jwcid="@Hidden" name="SYS_DATE" id="SYS_DATE" value="ognl:pageutil.getSysDate()"/>
<!-- 使用客户已有押金发票 -->
<input jwcid="@Hidden" name="INVOICE_DATA" id="INVOICE_DATA" value=""/>
<div jwcid="productTree@csserv:ProductSelect" productTypeCode="0000" afterAction="changeProduct.afterChangeProduct(productId,productName,brandCode,brandName)" monitor="USER_PRODUCT_ID" element="div"></div>
<!-- 
<div jwcid="productInvoice@csserv:Invoice" checkSvc="CS.InvoiceCheckSVC.checkInvoice" svcId="15" element="div"></div>
 -->
</body>
</html>