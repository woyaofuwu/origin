!function(t){var e,i=t.Axis,a=t.Chart,n=t.each,o=t.extend,r=t.merge,s=t.pick,l=t.numberFormat,h=t.getOptions(),d=h.plotOptions,m=t.Color,p=function(){};h.mapNavigation={enabled:!1,buttonOptions:{align:"right",verticalAlign:"bottom",x:0,width:18,height:18,style:{fontSize:"15px",fontWeight:"bold",textAlign:"center"}},buttons:{zoomIn:{onclick:function(){this.mapZoom(.5)},text:"+",y:-32},zoomOut:{onclick:function(){this.mapZoom(2)},text:"-",y:0}}},t.splitPath=function(t){var e;for(t=t.replace(/([A-Za-z])/g," $1 "),t=t.replace(/^\s*/,"").replace(/\s*$/,""),t=t.split(/[ ,]+/),e=0;e<t.length;e++)/[a-zA-Z]/.test(t[e])||(t[e]=parseFloat(t[e]));return t},t.maps={},t.wrap(i.prototype,"init",function(t,a,r){return"map"===a.options.chart.type&&o(this,{getSeriesExtremes:function(){var t=this.isXAxis,e=Number.MAX_VALUE,i=Number.MIN_VALUE;n(this.series,function(a){e=Math.min(e,a[t?"minX":"minY"]),i=Math.max(i,a[t?"maxX":"maxY"])}),this.dataMin=e,this.dataMax=i},setAxisTranslation:function(){var t,a,n,o=this.chart,r=o.plotWidth/o.plotHeight,s=this.isXAxis,l=o.xAxis[0];i.prototype.setAxisTranslation.call(this),s||l.transA===e||(this.transA=l.transA=Math.min(this.transA,l.transA),t=(l.max-l.min)/(this.max-this.min),n=t>r?this:l,a=(n.max-n.min)*n.transA,n.minPixelPadding=(n.len-a)/2)}}),t.call(this,a,r)}),t.wrap(a.prototype,"render",function(t){t.call(this),this.renderMapNavigation()}),o(a.prototype,{renderMapNavigation:function(){var t,e,i,a=this,n=this.options.mapNavigation,l=n.buttons,h=function(){this.handler.call(a)};if(s(n.enabled,!0))for(t in l)l.hasOwnProperty(t)&&(i=r(n.buttonOptions,l[t]),e=a.renderer.button(i.text,0,0,h).attr({width:i.width,height:i.height}).css(i.style).add(),e.handler=i.onclick,e.align(o(i,{width:e.width,height:e.height}),null,"spacingBox"))},fitToBox:function(t,e){return n([["x","width"],["y","height"]],function(i){var a=i[0],n=i[1];t[a]+t[n]>e[a]+e[n]&&(t[n]>e[n]?(t[n]=e[n],t[a]=e[a]):t[a]=e[a]+e[n]-t[n]),t[a]<e[a]&&(t[a]=e[a])}),t},mapZoom:function(t){var e=this.xAxis[0],i=e.max-e.min,a=e.min+i/2,n=i*t,o=this.yAxis[0],r=o.max-o.min,s=o.min+r/2,l=r*t,h=a-n/2,d=s-l/2,m=this.fitToBox({x:h,y:d,width:n,height:l},{x:e.dataMin,y:o.dataMin,width:e.dataMax-e.dataMin,height:o.dataMax-o.dataMin});e.setExtremes(m.x,m.x+m.width,!1),o.setExtremes(m.y,m.y+m.height,!1),this.redraw()}}),d.map=r(d.scatter,{animation:!1,minOpacity:.2,nullColor:"#F8F8F8",borderColor:"silver",borderWidth:1,marker:null,stickyTracking:!1,dataLabels:{verticalAlign:"middle"},tooltip:{followPointer:!0,headerFormat:'<span style="font-size:10px">{point.key}</span><br/>',pointFormat:"{series.name}: {point.y}<br/>"}}),t.seriesTypes.map=t.extendClass(t.seriesTypes.scatter,{type:"map",pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},colorKey:"y",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:p,getExtremesFromAll:!0,init:function(i){var a,o,r,s,h,d,m,p,c,u=this,x=i.options.legend.valueDecimals,g=[],f="horizontal"===i.options.legend.layout;t.Series.prototype.init.apply(this,arguments),d=u.options.colorRange,u.options.valueRanges?(n(u.options.valueRanges,function(i){o=i.from,r=i.to,a="",o===e?a="< ":r===e&&(a="> "),o!==e&&(a+=l(o,x)),o!==e&&r!==e&&(a+=" - "),r!==e&&(a+=l(r,x)),g.push(t.extend({chart:u.chart,name:a,options:{},drawLegendSymbol:t.seriesTypes.area.prototype.drawLegendSymbol,visible:!0,setState:function(){},setVisible:function(){}},i))}),u.legendItems=g):d&&(o=d.from,r=d.to,s=d.fromLabel,h=d.toLabel,p=f?[0,0,1,0]:[0,1,0,0],f||(c=s,s=h,h=c),m={linearGradient:{x1:p[0],y1:p[1],x2:p[2],y2:p[3]},stops:[[0,o],[1,r]]},g=[{chart:u.chart,options:{},fromLabel:s,toLabel:h,color:m,drawLegendSymbol:this.drawLegendSymbol,visible:!0,setState:function(){},setVisible:function(){}}],u.legendItems=g)},drawLegendSymbol:function(t,e){var i,a,n,o,r,l=t.options.symbolPadding,h=s(t.options.padding,8),d=this.chart.renderer.fontMetrics(t.options.itemStyle.fontSize).h,m="horizontal"===t.options.layout,p=s(t.options.rectangleLength,200);m?(i=-(l/2),a=0):(i=-p+t.baseline-l/2,a=h+d),e.fromText=this.chart.renderer.text(e.fromLabel,a,i).attr({zIndex:2}).add(e.legendGroup),n=e.fromText.getBBox(),e.legendSymbol=this.chart.renderer.rect(m?n.x+n.width+l:n.x-d-l,n.y,m?p:d,m?d:p,2).attr({zIndex:1}).add(e.legendGroup),o=e.legendSymbol.getBBox(),e.toText=this.chart.renderer.text(e.toLabel,o.x+o.width+l,m?i:o.y+o.height-l).attr({zIndex:2}).add(e.legendGroup),r=e.toText.getBBox(),m?(t.offsetWidth=n.width+o.width+r.width+2*l+h,t.itemY=d+h):(t.offsetWidth=Math.max(n.width,r.width)+l+o.width+h,t.itemY=o.height+h,t.itemX=l)},getBox:function(t){var e=Number.MIN_VALUE,i=Number.MAX_VALUE,a=Number.MIN_VALUE,o=Number.MAX_VALUE;n(t||this.options.data,function(t){for(var n=t.path,r=n.length,s=!1,l=Number.MIN_VALUE,h=Number.MAX_VALUE,d=Number.MIN_VALUE,m=Number.MAX_VALUE;r--;)"number"==typeof n[r]&&(s?(l=Math.max(l,n[r]),h=Math.min(h,n[r])):(d=Math.max(d,n[r]),m=Math.min(m,n[r])),s=!s);t._maxX=l,t._minX=h,t._maxY=d,t._minY=m,e=Math.max(e,l),i=Math.min(i,h),a=Math.max(a,d),o=Math.min(o,m)}),this.minY=o,this.maxY=a,this.minX=i,this.maxX=e},translatePath:function(t){var e,i=this,a=!1,n=i.xAxis,o=i.yAxis;for(t=[].concat(t),e=t.length;e--;)"number"==typeof t[e]&&(a?t[e]=Math.round(n.translate(t[e])):t[e]=Math.round(o.len-o.translate(t[e])),a=!a);return t},setData:function(){t.Series.prototype.setData.apply(this,arguments),this.getBox()},translate:function(){var t=this,e=Number.MAX_VALUE,i=Number.MIN_VALUE;t.generatePoints(),n(t.data,function(a){a.shapeType="path",a.shapeArgs={d:t.translatePath(a.path)},"number"==typeof a.y&&(a.y>i?i=a.y:a.y<e&&(e=a.y))}),t.translateColors(e,i)},translateColors:function(t,i){var a,o,r=this.options,s=r.valueRanges,l=r.colorRange,h=this.colorKey;l&&(a=m(l.from),o=m(l.to)),n(this.data,function(n){var d,m,p,c=n[h],u=[];if(s){for(m=s.length;m--;)if(d=s[m],a=d.from,o=d.to,(a===e||c>=a)&&(o===e||c<=o)){n.options.color=d.color;break}}else if(l&&void 0!==c){for(p=(i-c)/(i-t),m=4;m--;)u[m]=Math.round(o.rgba[m]+(a.rgba[m]-o.rgba[m])*p);n.options.color=null===c?r.nullColor:"rgba("+u.join(",")+")"}})},drawGraph:p,drawDataLabels:p,drawPoints:function(){var e=this,i=e.xAxis,a=e.yAxis,o=e.colorKey;n(e.data,function(t){t.plotY=1,null===t[o]&&(t[o]=0,t.isNull=!0)}),t.seriesTypes.column.prototype.drawPoints.apply(e),n(e.data,function(t){var e=t.dataLabels,n=i.toPixels(t._minX,!0),r=i.toPixels(t._maxX,!0),l=a.toPixels(t._minY,!0),h=a.toPixels(t._maxY,!0);t.plotX=Math.round(n+(r-n)*s(e&&e.anchorX,.5)),t.plotY=Math.round(l+(h-l)*s(e&&e.anchorY,.5)),t.isNull&&(t[o]=null)}),t.Series.prototype.drawDataLabels.call(e)}}),t.Map=function(e,i){var a,n={endOnTick:!1,gridLineWidth:0,labels:{enabled:!1},lineWidth:0,minPadding:0,maxPadding:0,startOnTick:!1,tickWidth:0,title:null};return a=e.series,e.series=null,e=r({chart:{type:"map",panning:"xy"},xAxis:n,yAxis:r(n,{reversed:!0})},e,{chart:{inverted:!1}}),e.series=a,new t.Chart(e,i)}}(Highcharts);