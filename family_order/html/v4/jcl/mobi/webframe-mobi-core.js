/*!
 * WADE JavaScript Mobi Library v2.0
 * http://www.wadecn.com/
 * auth:xiedx@asiainfo.com
 * Copyright 2015, WADE
 */
!function(t){"use strict";function e(t,e){t.os={},t.os.webkit=!!e.match(/WebKit\/([\d.]+)/),t.os.mobile=!!e.match(/Mobile/),t.os.android=!(!e.match(/(Android)\s+([\d.]+)/)&&!e.match(/Silk-Accelerated/)),t.os.androidICS=!(!t.os.android||!e.match(/(Android)\s4/)),t.os.ipad=!!e.match(/(iPad).*OS\s([\d_]+)/),t.os.iphone=!(t.os.ipad||!e.match(/(iPhone\sOS)\s([\d_]+)/)),t.os.ios7=!(!t.os.ipad&&!t.os.iphone||!e.match(/7_/)),t.os.webos=!!e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),t.os.touchpad=!(!t.os.webos||!e.match(/TouchPad/)),t.os.ios=t.os.ipad||t.os.iphone,t.os.playbook=!!e.match(/PlayBook/),t.os.blackberry10=!!e.match(/BB10/),t.os.blackberry=!!(t.os.playbook||t.os.blackberry10||e.match(/BlackBerry/)),t.os.chrome=!!e.match(/Chrome/),t.os.opera=!!e.match(/Opera/),t.os.fennec=!!e.match(/fennec/i)||!!e.match(/Firefox/),t.os.ie=!(!e.match(/MSIE 10.0/i)&&!e.match(/Trident\/7/i)),t.os.ieTouch=!(!t.os.ie||!e.toLowerCase().match(/touch/i)),t.os.tizen=!!e.match(/Tizen/i),t.os.supportsTouch=window.DocumentTouch&&n instanceof window.DocumentTouch||"ontouchstart"in window,t.os.kindle=!!e.match(/Silk-Accelerated/),t.feat={};var i=n.documentElement.getElementsByTagName("head")[0];t.feat.nativeTouchScroll="undefined"!=typeof i.style["-webkit-overflow-scrolling"]&&(t.os.ios||t.os.blackberry10),t.feat.cssPrefix=t.os.webkit?"Webkit":t.os.fennec?"Moz":t.os.ie?"ms":t.os.opera?"O":"",t.feat.cssTransformStart=t.os.opera?"(":"3d(",t.feat.cssTransformEnd=t.os.opera?")":",0)",t.os.android&&!t.os.webkit&&(t.os.android=!1),t.feat.osSuffix=t.os.ios?"_ios":t.os.blackberry?"_blackberry":t.os.android?"_android":""}var i,n=window.document;"object"==typeof MSApp;Wade.extend({uuid:function(){var t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},isWDElem:function(t){return t&&t.length&&t instanceof Wade.Dom.init},proxy:function(t,e,i){return function(){return i?t.apply(e,i):t.apply(e,arguments)}},vendorCss:function(t,e,i){return Wade.css(t,Wade.feat.cssPrefix+e,i)},cssTranslate:function(t,e){return this.vendorCss(t,"Transform","translate"+Wade.feat.cssTransformStart+e+Wade.feat.cssTransformEnd)},computedStyle:function(t,e){if(0!==this.length&&e!=i)return window.getComputedStyle(t,"")[e]},getCssMatrix:function(t){Wade.isWDElem(t)&&(t=t[0]);var e=window.WebKitCSSMatrix||window.MSCSSMatrix;if(t===i)return e?new e:{a:0,b:0,c:0,d:0,e:0,f:0};var n=window.getComputedStyle(t),s=n.webkitTransform||n.transform||n[Wade.feat.cssPrefix+"Transform"];if(e)return new e(s);if(s){var a=s.replace(/[^0-9\-.,]/g,"").split(",");return{a:+a[0],b:+a[1],c:+a[2],d:+a[3],e:+a[4],f:+a[5]}}return{a:0,b:0,c:0,d:0,e:0,f:0}}}),Wade.Dom.extend({vendorCss:function(t,e){this.each(function(){Wade.vendorCss(this,t,e)})},cssTranslate:function(t,e){return this.vendorCss(t,"Transform","translate"+Wade.feat.cssTransformStart+e+Wade.feat.cssTransformEnd)},computedStyle:function(t,e){if(0!==this.length&&e!=i)return window.getComputedStyle(t,"")[e]},replaceClass:function(t,e){t&&e&&(this.hasClass(t)&&this.addClass(e),this.hasClass(e)||this.removeClass(t))}}),e(Wade,window.navigator.userAgent),Wade.__detectUA=e,Wade.extend({availableTransitions:{},transitionTime:"230ms",vendorIncludeScript:function(t,e,i,n){t&&(t=(""+t).replace(/(.*)\/([0-9a-zA-Z_-]+).js/g,"$1/$2"+Wade.feat.osSuffix+".js"),Wade.isFunction(window.includeScript)?window.includeScript(t,e,i,n):Wade.includeScript(t,e))},css3animate:function(t,e){return t=Wade(t),t.css3Animate(e)},runTransition:function(t,e,i,n){this.availableTransitions[t]||(t="default"),"none"===e.style.display&&(e.style.display="block"),"none"===i.style.display&&(i.style.display="block"),this.availableTransitions[t].call(this,e,i,n)},noTransition:function(t,e,i){e.style.display="block",t.style.display="block";var n=this;n.clearAnimations(e),n.css3animate(t,{x:"0%",y:0}),n.finishTransition(t),e.style.zIndex=2,t.style.zIndex=1},finishTransition:function(t,e){t.style.display="none",this.doingTransition=!1,e&&this.clearAnimations(e),t&&this.clearAnimations(t)},clearAnimations:function(t){t.style[Wade.feat.cssPrefix+"Transform"]="none",t.style[Wade.feat.cssPrefix+"Transition"]="none"}}),Wade.availableTransitions["default"]=Wade.availableTransitions.none=Wade.noTransition,window.vendorIncludeScript=Wade.vendorIncludeScript}(Wade),function(t){"use strict";var e=[],i=function(t){return t.wmCSS3AnimateId||(t.wmCSS3AnimateId=Wade.uuid()),t.wmCSS3AnimateId},n=function(t){return"string"==typeof t||t instanceof String?document.getElementById(t):Wade.isWDElem(t)?t[0]:t},s=function(t,s){var a,o,r=n(t);return o=i(r),e[o]?(e[o].animate(s),a=e[o]):(a=c(r,s),e[o]=a),a};Wade.Dom.css3Animate=function(t){!t.complete&&t.callback&&(t.complete=t.callback);var e=s(this[0],t);t.complete=null,t.sucess=null,t.failure=null;for(var i=1;i<this.length;i++)e.link(this[i],t);return e},Wade.css3AnimateQueue=function(){return new c.queue};var a=Wade.feat.cssTransformStart,o=Wade.feat.cssTransformEnd,r=Wade.feat.cssPrefix.replace(/-/g,"")+"TransitionEnd";r=Wade.os.fennec||""===Wade.feat.cssPrefix||Wade.os.ie?"transitionend":r,r=r.replace(r.charAt(0),r.charAt(0).toLowerCase());var c=function(){var i=function(n,s){if(!(this instanceof i))return new i(n,s);if(this.callbacksStack=[],this.activeEvent=null,this.countStack=0,this.isActive=!1,this.el=n,this.linkFinishedProxy=Wade.proxy(this.linkFinished,this),this.el){this.animate(s);var a=this;t(this.el).bind("destroy",function(){var t=a.el.wmCSS3AnimateId;a.callbacksStack=[],e[t]&&delete e[t]})}};return i.prototype={animate:function(t){if(this.isActive&&this.cancel(),this.isActive=!0,!t)return void window.alert("Please provide configuration options for animation of "+this.el.id);var e,i,n=!!t.addClass,s=numOnly(t.time);if(n)t.removeClass?Wade(this.el).replaceClass(t.removeClass,t.addClass):Wade(this.el).addClass(t.addClass);else{if(0===s&&(t.time=0),t.y||(t.y=0),t.x||(t.x=0),t.previous){var c=new Wade.getCssMatrix(this.el);t.y+=numOnly(c.f),t.x+=numOnly(c.e)}t.origin||(t.origin="0% 0%"),t.scale||(t.scale="1"),t.rotateY||(t.rotateY="0"),t.rotateX||(t.rotateX="0"),t.skewY||(t.skewY="0"),t.skewX||(t.skewX="0"),t.timingFunction||(t.timingFunction="linear"),("number"==typeof t.x||t.x.indexOf("%")===-1&&t.x.toLowerCase().indexOf("px")===-1&&t.x.toLowerCase().indexOf("deg")===-1)&&(t.x=parseInt(t.x,10)+"px"),("number"==typeof t.y||t.y.indexOf("%")===-1&&t.y.toLowerCase().indexOf("px")===-1&&t.y.toLowerCase().indexOf("deg")===-1)&&(t.y=parseInt(t.y,10)+"px");var l="translate"+a+t.x+","+t.y+o+" scale("+parseFloat(t.scale)+") rotate("+t.rotateX+")";Wade.os.opera||(l+=" rotateY("+t.rotateY+")"),l+=" skew("+t.skewX+","+t.skewY+")",this.el.style[Wade.feat.cssPrefix+"Transform"]=l,this.el.style[Wade.feat.cssPrefix+"BackfaceVisibility"]="hidden";var d=Wade.feat.cssPrefix+"Transform";void 0!==t.opacity&&(this.el.style.opacity=t.opacity,d+=", opacity"),t.width&&(this.el.style.width=t.width,d="all"),t.height&&(this.el.style.height=t.height,d="all"),this.el.style[Wade.feat.cssPrefix+"TransitionProperty"]="all",(""+t.time).indexOf("s")===-1?(e="ms",i=t.time+e):t.time.indexOf("ms")!==-1?(e="ms",i=t.time):(e="s",i=t.time+e),t.delay&&(this.el.style[Wade.feat.cssPrefix+"TransitionDelay"]=t.delay),this.el.style[Wade.feat.cssPrefix+"TransitionDuration"]=i,this.el.style[Wade.feat.cssPrefix+"TransitionTimingFunction"]=t.timingFunction,this.el.style[Wade.feat.cssPrefix+"TransformOrigin"]=t.origin}this.callbacksStack.push({complete:t.complete,success:t.success,failure:t.failure}),this.countStack++;var u,m=this,h=window.getComputedStyle(this.el);n&&(u=h[Wade.feat.cssPrefix+"TransitionDuration"],s=numOnly(u),t.time=s,u.indexOf("ms")!==-1?e="ms":(e="s",t.time*=1e3)),0===s||"ms"===e&&s<5||"none"===h.display?Wade.asap(Wade.proxy(this.finishAnimation,this,[!1])):(this.activeEvent=function(t){clearTimeout(m.timeout),m.finishAnimation(t),m.el.removeEventListener(r,m.activeEvent,!1)},m.timeout=setTimeout(this.activeEvent,numOnly(t.time)+50),this.el.addEventListener(r,this.activeEvent,!1))},addCallbackHook:function(t){return t&&this.callbacksStack.push(t),this.countStack++,this.linkFinishedProxy},linkFinished:function(t){t?this.cancel():this.finishAnimation()},finishAnimation:function(t){t&&t.preventDefault&&t.preventDefault(),this.isActive&&(this.countStack--,0===this.countStack&&this.fireCallbacks(!1))},fireCallbacks:function(t){this.clearEvents();var e=this.callbacksStack;this.cleanup();for(var i=0;i<e.length;i++){var n=e[i].complete,s=e[i].success,a=e[i].failure;"function"==typeof n&&n(t),t&&"function"==typeof a?a():"function"==typeof s&&s()}},cancel:function(){this.isActive&&this.fireCallbacks(!0)},cleanup:function(){this.callbacksStack=[],this.isActive=!1,this.countStack=0},clearEvents:function(){this.activeEvent&&this.el.removeEventListener(r,this.activeEvent,!1),this.activeEvent=null},link:function(t,e){var i={complete:e.complete,success:e.success,failure:e.failure};return e.complete=this.addCallbackHook(i),e.success=null,e.failure=null,s(t,e),e.complete=i.complete,e.success=i.success,e.failure=i.failure,this}},i}();c.queue=function(){return{elements:[],push:function(t){this.elements.push(t)},pop:function(){return this.elements.pop()},run:function(){var t=this;if(0!==this.elements.length){if("function"==typeof this.elements[0]){var e=this.shift();e()}if(0!==this.elements.length){var i=this.shift();this.elements.length>0&&(i.complete=function(e){e||t.run()}),c(document.getElementById(i.id),i)}}},shift:function(){return this.elements.shift()}}}}(),Date.now||(Date.now=function(){return(new Date).getTime()}),function(){for(var t=["webkit","moz","ms"],e=0;e<t.length&&!window.requestAnimationFrame;++e){var i=t[e];window.requestAnimationFrame=window[i+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i+"CancelAnimationFrame"]||window[i+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var n=0;window.requestAnimationFrame=function(t){var e=Date.now(),i=Math.max(n+16,e);return setTimeout(function(){t(n=i)},i-e)},window.cancelAnimationFrame=clearTimeout}}(),function(t){var e=[],i=function(t){return t.wmAnimateId||(t.wmAnimateId=Wade.uuid()),t.wmAnimateId},n=function(t){return"string"==typeof t||t instanceof String?document.getElementById(t):Wade.is$(t)?t[0]:t},s=function(t,s){var o,r,c=n(t);return r=i(c),e[r]?(s&&e[r].animate(s),o=e[r]):(o=a(c,s),e[r]=o),o};Wade.fn.animate=function(t){var e=s(this[0],t);return e};var a=function(i,n){if(!(this instanceof a))return new a(i,n);if(this.el=i,this.el){n&&this.animate(n);var s=this;t(this.el).bind("destroy",function(){var t=s.el.wmAnimateId;e[t]&&delete e[t]})}};a.prototype={animationTimer:null,isAnimating:!1,startX:0,startY:0,runTime:0,endX:0,endY:0,currX:0,currY:0,animationStartTime:0,pauseTime:0,completeCB:null,easingFn:"linear",animateOpts:{},updateCb:null,animate:function(t){var e=this;e.isAnimating||(e.isAnimating=!0,window.cancelAnimationFrame(e.animationTimer),t||(t={x:0,y:0,duration:0}),this.easingFn=t.easing||"linear",this.completeCB=t.complete||null,this.updateCB=t.update||null,this.runTime=numOnly(t.duration),t.complete&&delete t.complete,this.animateOpts=t,this.startTime=Date.now(),this.startMatrix=Wade.getCssMatrix(this.el),0===this.runTime&&this.doAnimate())},start:function(){this.doAnimate()},doAnimate:function(){var t,e,i,n=Date.now(),s=this;return 0===this.runTime||n>=this.startTime+this.runTime?(s.setPosition(this.animateOpts.x,this.animateOpts.y),s.isAnimating=!1,this.updateCB&&this.updateCB({x:this.animateOpts.x,y:this.animateOpts.y}),void(this.completeCB&&this.completeCB())):(n=(n-this.startTime)/this.runTime,n=n>1?1:n,i=o[this.easingFn](n),t=(this.animateOpts.x-this.startMatrix.e)*i+this.startMatrix.e,e=(this.animateOpts.y-this.startMatrix.f)*i+this.startMatrix.f,this.setPosition(t,e),this.updateCB&&this.updateCB({x:t,y:e}),void(this.isAnimating&&(this.animationTimer=window.requestAnimationFrame(function(){s.doAnimate()}))))},setPosition:function(t,e){this.el.style[Wade.feat.cssPrefix+"Transform"]="matrix3d( 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+e+", 0, 1 )",this.currX=t,this.currY=e},stop:function(){this.isAnimating=!1,window.cancelAnimationFrame(this.animationTimer),this.pauseTime=Date.now()-this.startTime},resume:function(){this.isAnimating=!0,this.startTime=Date.now()-this.pauseTime,this.doAnimate()}};var o={linear:function(t){return t},easeOutSine:function(t){return Math.sin(t*Math.PI/2)}}}(Wade);