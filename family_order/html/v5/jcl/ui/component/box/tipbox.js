/*!
 * TipBox
 * http://www.wadecn.com/
 * auth:xiedx@asiainfo.com
 * Copyright 2015, WADE
 */
!function(u,f,h){"use strict";if(u&&"undefined"==typeof u.TipBox){Object.prototype.toString;var n,e=Array.prototype.push,t=Array.prototype.splice,r=(Wade.support.deleteExpando,"TipBox"+(new Date).valueOf()),l=0,a="undefined"!=typeof u.hasTouch?u.hasTouch:"ontouchstart"in f,i=a?"touchstart":"mouseover",y=7.2,d=[],s=function(t,e){var i=this;i.el=t&&1==t.nodeType?t:h.getElementById(t),i.el&&i.el.nodeType&&(i.id=u.attr(i.el,"id"))&&(e&&u.isObject(e)&&u.extend(i,e),u.attr(i.el,"x-wade-uicomponent","tipbox"),i._init(),i.constructor.call(i))};s.prototype=u.extend(new u.UIComponent,{update:function(t,e){var i=this;if(e&&u.isString(e)&&(i.color=e),t!=undefined&&u.isString(t)&&i.ctEl){if((t=t.replace(/\n|\\n/gi,"<br />"))==i.ctEl.innerHTML)return;i.ctEl.innerHTML=t,!0===i.visible&&i.adjust()}},show:function(){var t=this;!0!==t.visible&&(t.adjust(),t.el.style.zIndex=1100+u.inArray(t.id,d),t.el.style.display="",t.visible=!0)},hide:function(){this.el.style.display="none",this.visible=!1},adjust:function(){var t,e,i=this;!0!==i.visible&&(i.el.style.visibility="hidden",i.el.style.display=""),t=i.ctEl.offsetHeight,e=i.ctEl.offsetWidth,!0!==i.visible&&(i.el.style.visibility="",i.el.style.display="none");var o,n,r=h.body.offsetHeight,l=h.body.offsetWidth,a=i.targetLeft+i.targetWidth/2,d=i.targetTop+i.targetHeight/2;n=l/3*2<a?"left":a<l/3?"right":"";var s=a,p=d;"bottom"==(o=r/3*2<d?"top":d<r/3?"bottom":"")?p=i.targetTop+i.targetHeight+y:"top"==o?p=i.targetTop-t-y:""==o&&(p=""==n?i.targetTop+i.targetHeight+y:i.targetTop+i.targetHeight/2-t/2),"left"==n?s=""==o?i.targetLeft-e-y:i.targetLeft+i.targetWidth/2-e+13.2:"right"==n?s=""==o?i.targetLeft+i.targetWidth+y:i.targetLeft+i.targetWidth/2-13.2:""==n&&(s=i.targetLeft+i.targetWidth/2-e/2);var c="c_tooltip";(o||n)&&(c+=" c_tooltip",c+=o?"-"+o:"",c+=n?"-"+n:""),i.color&&(c+=" c_tooltip-"+i.color),i.el.className=c,u.browser.msie&&document.documentMode<10?(i.el.style.visibility="hidden",i.el.className="",i.flushTimer&&(f.clearTimeout(i.flushTimer),i.flushTimer=null),i.flushTimer=f.setTimeout("var el = document.getElementById('"+i.id+"'); if(el && el.nodeType){el.className='"+c+"';el.style.left='"+s+"px';el.style.top='"+p+"px';el.style.visibility = '';}el = null;",0)):(i.el.style.left=s+"px",i.el.style.top=p+"px")},destroy:function(){this.ctEl=null,this.el=null,t.call(d,u.inArray(this.id,d),1)},_init:function(){var t=this;t.ctEl=h.getElementById(t.id+"_content"),t.visible=!1,u.inArray(t.id,d)<0&&e.call(d,t.id)}}),u(function(){a&&u(h.body).bind("longTap",function(t){var e=c(t);if(e){var i,o=p(e);o&&(i=g(o))&&(i.update(u.attr(o,"tip"),u.attr(o,"tipcolor")),i.show()),i&&(n=i.id)}}),u(h.body).bind(i,function(t){t.originalEvent&&(t=t.originalEvent);var e=c(t);if(e){var i;if(!a){var o=p(e);o&&(i=g(o))&&(i.update(u.attr(o,"tip"),u.attr(o,"tipcolor")),i.show())}n&&f[n]&&(!i&&!function(t){if(t&&t.nodeType){for(var e=0,i=t,o=!1;i&&i.nodeType&&i!=h.body&&e<5;){if(1==i.nodeType&&u.nodeName(i,"div")&&-1<u.inArray(u.attr(i,"id"),d)){o=!0;break}i=i.parentNode,e++}return o?i:void 0}}(e)||i&&i.id!=n)&&(f[n].hide(),n=null),i&&(n=i.id)}}),u(f).bind("onorientationchange"in f?"orientationchange":"resize",function(){n&&f[n]&&(f[n].hide(),n=null)})}),u.extend(s,{make:g,show:function(t,e,i){var o=g(t,i);return o&&(o.update(e,i),o.show()),n&&f[n]&&o&&o.id!=n&&(f[n].hide(),n=null),o&&(n=o.id),o}}),u.TipBox=s,f.showTipBox=s.show}function p(t){if(t&&t.nodeType){for(var e=0,i=t,o=!1;i&&i.nodeType&&i!=h.body&&e<50;){if(1==i.nodeType&&"none"!=i.style.display&&i.attributes&&"tip"in i.attributes){o=!0;break}i=i.parentNode,e++}return o?i:void 0}}function c(t){return a&&t.touchs&&t.touchs.length?t.touchs[0].target:t.target?t.target:t.srcElement}function g(t,e){if(t&&1==t.nodeType&&"none"!=t.style.display){var i=u.attr(t,r);i||(i="wade_tipbox-"+ ++l,u.attr(t,r,i));var o=t.getBoundingClientRect(),n={targetLeft:o.left,targetTop:o.top,targetWidth:t.offsetWidth,targetHeight:t.offsetHeight,color:e||""};return f[i]?u.extend(f[i],n):(u(h.body).append('<div id="'+i+'" class="c_tooltip c_tooltip-top" style="left:-99999px;top:-99999px;max-width:28.5em;display:none">\t<div id="'+i+'_content" class="content">'+u.attr(t,"tip")+"\t</div></div>"),f[i]=new s(i,n))}}}(window.Wade,window,document);