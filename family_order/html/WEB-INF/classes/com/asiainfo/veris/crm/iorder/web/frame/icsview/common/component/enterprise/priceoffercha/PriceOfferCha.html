<div jwcid="@Any" element="div" class="c_popupItem" id="ognl:info.id">
	<div id="PriceChaHead" class="c_header">
		<div class="back" ontap="backPopup(this);">价格特征</div>
	</div>
	<div jwcid="@Scroller" name="priceChaListDiv" class="c_scroll c_scroll-float c_scroll-submit c_scroll-header">
		<div class="c_scrollContent l_padding-side">
			<div class="c_scrollContent">
				<!-- 列表 开始 -->
				<div class="c_space"></div>
				<div jwcid="PriceOfferChaListPart@Part" class="c_list c_list-line c_list-border">
					<ul>
						<li class="ognl:priceOfferCha.IS_NULL==0?'link required':'link'" jwcid="@Foreach" source="ognl:priceOfferChaList" value="ognl:priceOfferCha" element="li">
						    <!-- 普通文本框 开始 -->
							<div jwcid="@Conditional" condition='ognl:"0".equals(priceOfferCha.SHOW_MODE)
							&& ("7360".equals(priceOfferCha.FIELD_NAME) || "7361".equals(priceOfferCha.FIELD_NAME) || "7362".equals(priceOfferCha.FIELD_NAME))'>
								<div class="label"><span jwcid="@Insert" name="CHA_SPEC_NAME" value="ognl:priceOfferCha.CHA_SPEC_NAME"></span></div>
								<div class="value">
									<input jwcid="@TextField" name="ognl:priceOfferCha.FIELD_NAME" 
										id="ognl:priceOfferCha.FIELD_NAME" 
										value="ognl:priceOfferCha.ATTR_VALUE" 
										oldValue="ognl:priceOfferCha.ATTR_VALUE" 
										nullable="ognl:priceOfferCha.IS_NULL==0?'no':'yes'" 
										desc="ognl:priceOfferCha.CHA_SPEC_NAME"
										max = "ognl:priceOfferCha.MAX_VALUE" 
										min = "ognl:priceOfferCha.MIN_VALUE"
										datatype="ognl:priceOfferCha.DATA_TYPE"
										disabled="ognl:priceOfferCha.IS_EDIT==1?false:true" 
										regexp="ognl:priceOfferCha.REG_EXP" 
										errMsg="ognl:priceOfferCha.ERR_MSG" 
										CHA_SPEC_ID="ognl:priceOfferCha.CHA_SPEC_ID" 
										OFFER_CHA_INS_ID="ognl:priceOfferCha.OFFER_CHA_INS_ID"
										onkeyup="calculateAllFlow()"/>
										<input type="hidden" jwcid="@Any" id='ognl:priceOfferCha.FIELD_NAME+"_ATTR_SINGLE_FLOW"' value="ognl:priceOfferCha.ATTR_SINGLE_FLOW"/>
								</div>
							</div>
							<!-- 普通文本框 开始 -->
							<div jwcid="@Conditional" condition='ognl:"0".equals(priceOfferCha.SHOW_MODE)
							&& ("7360"!=priceOfferCha.FIELD_NAME && "7361"!=priceOfferCha.FIELD_NAME &&"7362"!=priceOfferCha.FIELD_NAME)'>
								<div class="label"><span jwcid="@Insert" name="CHA_SPEC_NAME" value="ognl:priceOfferCha.CHA_SPEC_NAME"></span></div>
								<div class="value">
									<input jwcid="@TextField" name="ognl:priceOfferCha.FIELD_NAME" 
										id="ognl:priceOfferCha.FIELD_NAME" 
										value="ognl:priceOfferCha.ATTR_VALUE" 
										oldValue="ognl:priceOfferCha.ATTR_VALUE" 
										nullable="ognl:priceOfferCha.IS_NULL==0?'no':'yes'" 
										desc="ognl:priceOfferCha.CHA_SPEC_NAME"
										max = "ognl:priceOfferCha.MAX_VALUE" 
										min = "ognl:priceOfferCha.MIN_VALUE"
										datatype="ognl:priceOfferCha.DATA_TYPE" 
										disabled="ognl:priceOfferCha.IS_EDIT==1?false:true" 
										regexp="ognl:priceOfferCha.REG_EXP" 
										errMsg="ognl:priceOfferCha.ERR_MSG" 
										CHA_SPEC_ID="ognl:priceOfferCha.CHA_SPEC_ID" 
										OFFER_CHA_INS_ID="ognl:priceOfferCha.OFFER_CHA_INS_ID"/>
								</div>
							</div>
							<!-- 普通文本框 结束 -->
							<div jwcid="@Conditional" condition='ognl:"2".equals(priceOfferCha.SHOW_MODE)'>
								<div class="label"><span jwcid="@Insert" name="CHA_SPEC_NAME" value="ognl:priceOfferCha.CHA_SPEC_NAME"></span></div>
								<div class="value">
									<input jwcid="@DateField" name="ognl:priceOfferCha.FIELD_NAME" 
										ontap="setCalendar(this);" 
										value="ognl:priceOfferCha.ATTR_VALUE" 
										nullable="ognl:priceOfferCha.IS_NULL==0?'no':'yes'" 
										desc="ognl:priceOfferCha.CHA_SPEC_NAME" 
										CHA_SPEC_ID="ognl:priceOfferCha.CHA_SPEC_ID"
										OFFER_CHA_INS_ID="ognl:priceOfferCha.OFFER_CHA_INS_ID"/>/>
								</div>
								<div class="more"></div>
							</div>
							<!-- 下拉框 开始 -->
							<div jwcid="@Conditional" condition='ognl:"1".equals(priceOfferCha.SHOW_MODE) || "3".equals(priceOfferCha.SHOW_MODE)'>
								<div class="label"><span jwcid="@Insert" name="CHA_SPEC_NAME" value="ognl:priceOfferCha.CHA_SPEC_NAME"></span></div>
								<div class="value">
									<input jwcid="@Select" name="ognl:priceOfferCha.FIELD_NAME" 
										source="ognl:priceOfferCha.DATA_VAL" 
										textField="TEXT" valueField="VALUE" 
										value="ognl:priceOfferCha.ATTR_VALUE" 
										oldValue="ognl:priceOfferCha.ATTR_VALUE" 
										nullable="ognl:priceOfferCha.IS_NULL=='0'?'no':'yes'" 
										desc="ognl:priceOfferCha.CHA_SPEC_NAME" 
										CHA_SPEC_ID="ognl:priceOfferCha.CHA_SPEC_ID" 
										OFFER_CHA_INS_ID="ognl:priceOfferCha.OFFER_CHA_INS_ID"/>
								</div>
							</div>
							<!-- 下拉框 结束 -->
							<!-- 自动计算属性 开始 -->
							<div jwcid="@Conditional" condition='ognl:"A".equals(priceOfferCha.SHOW_MODE)'>
								<div class="label"><span jwcid="@Insert" name="CHA_SPEC_NAME" value="ognl:priceOfferCha.CHA_SPEC_NAME"></span></div>
								<div class="value">
									<input jwcid="@TextField" name="ognl:priceOfferCha.FIELD_NAME" 
										id="ognl:priceOfferCha.FIELD_NAME" 
										value="ognl:priceOfferCha.ATTR_VALUE" 
									 	oldValue="ognl:priceOfferCha.ATTR_VALUE" 
									 	desc="ognl:priceOfferCha.CHA_SPEC_NAME" 
									 	style="display:" 
									 	calculate_formula="ognl:priceOfferCha.CALCULATE_FORMULA" 
									 	datatype="ognl:priceOfferCha.DATA_TYPE" 
									 	CHA_SPEC_ID="ognl:priceOfferCha.CHA_SPEC_ID" 
									 	OFFER_CHA_INS_ID="ognl:priceOfferCha.OFFER_CHA_INS_ID"/>
								</div>
							</div>
							<!-- 自动计算属性 结束 -->
							<!-- 隐藏属性 开始 -->
							<div jwcid="@Conditional" condition='ognl:"H".equals(priceOfferCha.SHOW_MODE)' style="display:none">
								<div class="label" style="display:none"><span jwcid="@Insert" name="CHA_SPEC_NAME" value="ognl:priceOfferCha.CHA_SPEC_NAME"></span></div>
								<div class="value" style="display:none">
									<input jwcid="@Hidden" name="ognl:priceOfferCha.FIELD_NAME" 
										id="ognl:priceOfferCha.FIELD_NAME" 
										value="ognl:priceOfferCha.ATTR_VALUE" 
										oldValue="ognl:priceOfferCha.ATTR_VALUE" 
										nullable="ognl:priceOfferCha.IS_NULL==0?'no':'yes'" 
										desc="ognl:priceOfferCha.CHA_SPEC_NAME"
										datatype="ognl:priceOfferCha.DATA_TYPE" 
										disabled="ognl:priceOfferCha.IS_EDIT==1?false:true" 
										regexp="ognl:priceOfferCha.REG_EXP" 
										errMsg="ognl:priceOfferCha.ERR_MSG" 
										CHA_SPEC_ID="ognl:priceOfferCha.CHA_SPEC_ID" 
										OFFER_CHA_INS_ID="ognl:priceOfferCha.OFFER_CHA_INS_ID"/>
								</div>
							</div>
							<!-- 隐藏属性 结束 -->
							<!-- <div jwcid="@Conditional" condition="ognl:priceOfferCha.SHOW_TYPE == '08'">
								<div class="main"><span jwcid="@Insert" name="CHA_SPEC_NAME" value="ognl:priceOfferCha.CHA_SPEC_NAME"></span></div>
								<div class="fn">
									<input jwcid="@Radio" name="ognl:priceOfferCha.CODE" id="ognl:priceOfferCha.CODE" 
									 desc="ognl:priceOfferCha.CHA_SPEC_NAME" ontap="" CHA_SPEC_ID="ognl:priceOfferCha.CHA_SPEC_ID"/>
								</div>
							</div>
							<div jwcid="@Conditional" condition="ognl:priceOfferCha.SHOW_TYPE == '09'">
								<div class="main"><span jwcid="@Insert" name="CHA_SPEC_NAME" value="ognl:priceOfferCha.CHA_SPEC_NAME"></span></div>
								<div class="fn">
									<input jwcid="@Checkbox" name="ognl:priceOfferCha.CODE" id="ognl:priceOfferCha.CODE" 
									 desc="ognl:priceOfferCha.CHA_SPEC_NAME"  CHA_SPEC_ID="ognl:priceOfferCha.CHA_SPEC_ID"/>
								</div>
							</div> -->
						</li>
					</ul>
				</div>
				<div class="c_line"></div>
				<!-- 列表 结束 -->
			</div>
			<input jwcid="@Hidden" id="pricecha_OFFER_ID" name="pricecha_OFFER_ID" value="" desc="当前资费类商品标识"/>
			<input jwcid="@Hidden" id="pricecha_OFFER_INDEX" name="pricecha_OFFER_INDEX" value="" desc="当前资费类商品序号"/>
			<div class="c_space"></div>
			<!-- 提交 开始 -->
			<div class="c_submit c_submit-full">
				<!-- <button type="button" class="e_button-r e_button-l e_button-navy" ontap="backPopup(this);">取消</button> -->
				<button type="button" class="e_button-r e_button-l e_button-blue" ontap="priceOfferCha.submitPriceOfferCha();">确定</button>
			</div>
			<!-- 提交 结束 -->
		</div>
	</div>
</div>

<script type="text/javascript">

function calculateAllFlow(){
	var attrs = $("input[name=7362]");
	var length = attrs.length;
	//alert("attrs:"+attrs+"---length:"+length);
	if(attrs.length>0){
		var depositRate =$("input[name=7360]").val();//折扣率
		var flowCount =$("input[name=7361]").val();//流量份数
		var singleFlow = $("#7362_ATTR_SINGLE_FLOW").val();
		var allFlow = Number(singleFlow)*Number(flowCount);
		$("input[name=7362]").val(allFlow);
	}
}
</script>