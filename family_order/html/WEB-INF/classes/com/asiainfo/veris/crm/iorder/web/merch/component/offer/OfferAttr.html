<div jwcid="@Popup" name="ognl:id+'Pop'" >
	<div class="c_popupGroup">
		<div jwcid="@Any" id="ognl:id+'Item'" class="c_popupItem">
			<div class="c_header">
				<div class="back" id="attrTitle">属性</div>
			</div>
			<div class="c_scroll c_scroll-float c_scroll-header">
				<div class="l_padding">
					<div class="l_col l_col-space">
						<!-- 商品信息 开始 -->
						<div class="l_colItem">
							<div class="c_article  c_article-left">
								<div class="title" name="offerName">
								</div>
								<div class="info" name="offerDesc">
								</div>
							</div>
							<div class="c_space-2"></div>
							<!-- 表单 开始 -->
							<div class="c_list c_list-s c_list-border c_list-line" jwcid="@Part" element="div" id="ognl:id+'Panel'">
								<ul >
									<li jwcid="@Foreach"  source="ognl:Attrs" value="ognl:attr" element="li" class='ognl:"0".equals(attr.ATTR_CAN_NULL)?"link required":"link"'>
										<div jwcid="@Conditional" condition='ognl:(attr.DISPLAY_CONDITION==null) || (displayCondition == null) || (attr.DISPLAY_CONDITION!=null&&displayCondition!=null&&attr.DISPLAY_CONDITION.indexOf(displayCondition)>=0)'>	
											<div class="label"><span jwcid="@Insert" value="ognl:attr.ATTR_LABLE"/></div>
											<div class="value" >
											    <!--普通input框-->			
												<div jwcid="@Conditional" condition='ognl:"0".equals(attr.ATTR_TYPE_CODE) && ("7360".equals(attr.ATTR_CODE) || "7361".equals(attr.ATTR_CODE) || "7362".equals(attr.ATTR_CODE))'>
													<input
													jwcid="@TextField" 
													name="ognl:attr.ATTR_CODE" 
													id="ognl:'ATTR'+attr.ATTR_CODE" 
													attrCode = "ognl:attr.ATTR_CODE"
													type="text"
													value="ognl:attr.ATTR_INIT_VALUE"
													datatype='ognl:attr.(attr.ATTR_VALUE_TYPE ==null || "".equals(attr.ATTR_VALUE_TYPE)) ? attr.ATTR_FIELD_TYPE_WADE : attr.ATTR_VALUE_TYPE'
													nullable='ognl:"0".equals(attr.ATTR_CAN_NULL)?"no":"yes"'
                                                    disabled="ognl:(('7362'.equals(attr.ATTR_CODE))?'true':(attr.DISPLAY_CONDITION==null || displayCondition == null)?'false':((attr.DISPLAY_CONDITION!=null&&displayCondition!=null&&attr.DISPLAY_CONDITION.indexOf(displayCondition)>=0)?'false':'true'))"
													minsize = 'ognl: (attr.ATTR_FIELD_MIN ==null || "".equals(attr.ATTR_FIELD_MIN))?"0":attr.ATTR_FIELD_MIN'
													maxsize = 'ognl: (attr.ATTR_FIELD_MAX ==null || "".equals(attr.ATTR_FIELD_MAX))?"999":attr.ATTR_FIELD_MAX'
													desc="ognl:attr.ATTR_LABLE" onkeyup="calculateAllFlow()" />
												</div>

												<div jwcid="@Conditional"
													condition='ognl:("0".equals(attr.ATTR_TYPE_CODE)  && ("7360"!=attr.ATTR_CODE || "7361"!=attr.ATTR_CODE || "7362"!=attr.ATTR_CODE) )'>
													<input jwcid="@TextField" 
													    name="ognl:attr.ATTR_CODE" 
													    id="ognl:'ATTR'+attr.ATTR_CODE" 
													    attrCode = "ognl:attr.ATTR_CODE"
														type="text" 
														value="ognl:attr.ATTR_INIT_VALUE"
														datatype="ognl:attr.ATTR_FIELD_TYPE_WADE"
														nullable='ognl:"0".equals(attr.ATTR_CAN_NULL)?"no":"yes"'
														disabled="ognl:((attr.DISPLAY_CONDITION==null || displayCondition == null)?'false':((attr.DISPLAY_CONDITION!=null&&displayCondition!=null&&attr.DISPLAY_CONDITION.indexOf(displayCondition)>=0)?'false':'true'))"
														minsize='ognl: (attr.ATTR_FIELD_MIN ==null || "".equals(attr.ATTR_FIELD_MIN))?"0":attr.ATTR_FIELD_MIN'
														maxsize='ognl: (attr.ATTR_FIELD_MAX ==null || "".equals(attr.ATTR_FIELD_MAX))?"999":attr.ATTR_FIELD_MAX'
														desc="ognl:attr.ATTR_LABLE" />
												</div>
                                    			<!--selected模式-->
												<div jwcid="@Conditional" condition='ognl:"1".equals(attr.ATTR_TYPE_CODE)||"3".equals(attr.ATTR_TYPE_CODE)'>
													<select jwcid="@Select"
													class="e_select e_select-r"
													name="ognl:attr.ATTR_CODE" 
													id="ognl:'ATTR'+attr.ATTR_CODE"
													attrCode = "ognl:attr.ATTR_CODE"
													source="ognl:attr.PARAMS"
													textField="ATTR_FIELD_NAME" valueField="ATTR_FIELD_CODE" titleField="ATTR_FIELD_NAME"
													value="ognl:attr.ATTR_INIT_VALUE"
													onchange="ognl:attr.SELFFUNC"
													nullable='ognl:"0".equals(attr.ATTR_CAN_NULL)?"no":"yes"'
                                                    disabled="ognl:((attr.DISPLAY_CONDITION==null || displayCondition == null)?'false':((attr.DISPLAY_CONDITION!=null&&displayCondition!=null&&attr.DISPLAY_CONDITION.indexOf(displayCondition)>=0)?'false':'true'))"
													desc="ognl:attr.ATTR_LABLE"/>
												</div>
												<!--时间输入-->
												<div jwcid="@Conditional" condition='ognl:"2".equals(attr.ATTR_TYPE_CODE)'>
													<div class="link" jwcid="@Any" attrId="ognl:attr.ATTR_CODE">
														<div class="value">
															<input jwcid="@DateField"
															name="ognl:attr.ATTR_CODE"  
															id="ognl:'ATTR'+attr.ATTR_CODE" 
															attrCode = "ognl:attr.ATTR_CODE"
															value="ognl:attr.ATTR_INIT_VALUE"
                                                            format='ognl:"1".equals(attr.RSRV_STR5)?"yyyyMMddHHmmss":"yyyy-MM-dd"'
                                                            nullable='ognl:"0".equals(attr.ATTR_CAN_NULL)?"no":"yes"'
                                                            disabled="ognl:((attr.DISPLAY_CONDITION==null || displayCondition == null)?'false':((attr.DISPLAY_CONDITION!=null&&displayCondition!=null&&attr.DISPLAY_CONDITION.indexOf(displayCondition)>=0)?'false':'true'))"
															desc="ognl:attr.ATTR_LABLE"
															dropDown="true"/>
														</div>
													</div>
												</div>
												 <!--连续值(类型为密码)-->
												<div jwcid="@Conditional" condition='ognl:"4".equals(attr.ATTR_TYPE_CODE)'>
													<input
													jwcid="@Any" 
													name="ognl:attr.ATTR_CODE" 
													id="ognl:'ATTR'+attr.ATTR_CODE" 
													attrCode = "ognl:attr.ATTR_CODE"
													type="password"
													value="ognl:attr.ATTR_INIT_VALUE"
													nullable='ognl:"0".equals(attr.ATTR_CAN_NULL)?"no":"yes"'
                                                    disabled="ognl:((attr.DISPLAY_CONDITION==null || displayCondition == null)?null:((attr.DISPLAY_CONDITION!=null&&displayCondition!=null&&attr.DISPLAY_CONDITION.indexOf(displayCondition)>=0)?null:'true'))"
													minsize="6"
													desc="ognl:attr.ATTR_LABLE"
													/>
												</div>
												<!--离散值-->
												<div jwcid="@Conditional" condition='ognl:"5".equals(attr.ATTR_TYPE_CODE)'>
													<input
													jwcid="@Radio" 
													name="ognl:attr.ATTR_GROUP_NAME" 
													id="ognl:'ATTR'+attr.ATTR_CODE" 
													attrCode = "ognl:attr.ATTR_CODE"
													type="radio"
													value=""
													attrValue = "ognl:attr.PARAMS.get(0).ATTR_FIELD_CODE"
													nullable='ognl:"0".equals(attr.ATTR_CAN_NULL)?"no":"yes"'
                                                    disabled="ognl:((attr.DISPLAY_CONDITION==null || displayCondition == null)?null:((attr.DISPLAY_CONDITION!=null&&displayCondition!=null&&attr.DISPLAY_CONDITION.indexOf(displayCondition)>=0)?null:'true'))"
													onclick="ognl:attr.SELFFUNC"
													desc="ognl:attr.ATTR_LABLE"/>
													<span jwcid="@Insert" value="ognl:attr.PARAMS.get(0).ATTR_FIELD_NAME"/>
												</div>
											</div>
										</div>	
									</li>
									<li name="dateLi">
										<div class="label">有效期：</div>
										<div class="value">
											<div class="text">
												<span name="startDate"></span>
												<span class="e_gray">～</span>
												<span name="endDate"></span>
											</div> 
										</div>
									</li>
								</ul>
							</div>
							<!-- 表单 结束 -->
							<div class="c_space"></div>
							<!-- 提交 开始 -->
			                <div class="c_submit c_submit-full" id="offerAttrSubmit">
			                    <button type="button" id="submitShoppingCardButton" name="submitShoppingCardButton" jwcid="@Any"
			                            ontap="hidePopup(this);" class="e_button-l e_button-navy e_button-r">取消
			                    </button>
			                    <button type="button" id="cancelShoppingCardButton" name="cancelShoppingCardButton" jwcid="@Any"
			                            ontap="ognl:id+'.confirmAttr();'" class="e_button-l e_button-blue e_button-r">确定
			                    </button>
			                </div>
							<!-- 提交 结束 -->
						</div>
						<!-- 商品信息 结束 -->
					</div>
					<!-- 商品详情 开始 -->
					<div class="c_space-4"></div>
				</div>
			</div>
		</div>
	</div>
</div>

<script type="text/javascript">
    function calculateAllFlow() {
        var attrs = $("input[name=7362]");
        var length = attrs.length;
        if (attrs.length > 0) {
            var depositRate = $("input[name=7360]").val();//折扣率
            var flowCount = $("input[name=7361]").val();//流量份数
            var singleFlow = $("#7362_ATTR_SINGLE_FLOW").val();
            var allFlow = Number(singleFlow) * Number(flowCount);
            $("input[name=7362]").val(allFlow);
        }
    }
</script>